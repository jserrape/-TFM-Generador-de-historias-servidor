{% extends 'base.html' %}
{% block content %}
      <div class="container">
         <div class="col-md-12">
            <br><br><br><br>
            <h1 class="titulo">Nueva historia</h1>
            <hr>
            <form id="nueva-historia-form">
               <div class="form-group">
                  <label for="id">Nombre de la historia</label>
                  <input name="nombre_historia" type="text" class="form-control" value="" placeholder="Introduzca nombre de la historia" />
               </div>
               <div class="form-group">
                  <label for="id">Imagen de título</label>
                  <input name="imagen_historia" type="text" class="form-control" value="" placeholder="Añada imagen de título" />
               </div>
               <div class="form-group">
                  <label for="id">Latitud inicial</label>
                  <input name="latitud_historia" type="number" step="0.0001" class="form-control" value="37.197" placeholder="Introduzca la latitud inicial" />
               </div>
               <div class="form-group">
                  <label for="id">Longitud inicial</label>
                  <input name="longitud_historia" type="number" step="0.0001" class="form-control" value="-3.62" placeholder="Introduzca la longitud inicial" />
               </div>
               <div class="form-group">
                  <label for="id">Zoom de la cámara</label>
                  <input name="zoom" type="text" class="form-control" value="" placeholder="Introduzca el zoom inicial" />
               </div>
               <div class="form-group">
                  <label for="id">Descripción de la historia</label>
                  <input name="descripcion_historia" type="text" class="form-control" value="" placeholder="Introduzca la descripción de la historia" />
               </div>

               <br>
               <hr>

               <h2>Misión #1</h2>

               <div class="form-group">
                  <label for="id">Nombre de la misión</label>
                  <input name="nombre_mision_1" type="text" class="form-control" value="" placeholder="Introduzca nombre de la misión" />
               </div>
               <div class="form-group">
                  <label for="id">Icono</label>
                  <input name="icono_mision_1" type="text" class="form-control" value="" placeholder="Introduzca el icono" />
               </div>
               <div class="form-group">
                  <label for="id">Latitud</label>
                  <input name="latitud_mision_1" type="number" step="0.0001" class="form-control" value="37.197" placeholder="Introduzca la latitud" />
               </div>
               <div class="form-group">
                  <label for="id">Longitud</label>
                  <input name="longitud_mision_1" type="number" step="0.0001" class="form-control" value="-3.62" placeholder="Introduzca la longitud" />
               </div>
               <div class="form-group">
                  <label for="id">Tipo</label>
                  <input name="tipo_mision_1" type="text" class="form-control" value="" placeholder="Introduzca el tipo de interacción" />
               </div>
               <div class="form-group">
                  <label for="id">Código de tipo</label>
                  <input name="codigo_tipo_mision_1" type="text" class="form-control" value="" placeholder="Introduzca el código de la interacción" />
               </div>
               <div class="form-group">
                  <label for="id">Precedentes</label>
                  <input name="precedentes_mision_1" type="text" class="form-control" value="" placeholder="Introduzca las misiones precedentes" />
               </div>
               <div class="form-group">
                  <label for="id">Pista de audio</label>
                  <input name="audio_mision_1" type="text" class="form-control" value="" placeholder="Introduzca la pista de audio" />
               </div>
               <div class="form-group">
                  <label for="id">Descripción</label>
                  <input name="descripcion_mision_1" type="text" class="form-control" value="" placeholder="Introduzca la descripción de la misión" />
               </div>

               <br>
               <hr>

               <div class="row">
                  <div class="col-md-12">
                    <div class="col-md-6">
                      <div class="form-group">
                         <input value="Nueva misión" class="btn btn-success" id="btn"/>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group">
                         <input value="Crear historia" type="submit" class="btn btn-primary" />
                      </div>
                    </div>
                  </div>
               </div>
            </form>
         </div>
      </div>

   <script>
     var debug = true;
     if ( debug ){
       var HISTORIA_REST_URL = "http://localhost/rest/historia";
     }else{
       var HISTORIA_REST_URL = "https://tfm-historias.herokuapp.com/rest/historia";
     }

     $('.btn').on('click', function() {
       console.log("Hello world!");
      });

     $(function POST_historia(){
      $('#nueva-historia-form').submit(function(){
        $.ajax({
          url: HISTORIA_REST_URL,
          type: 'POST',
          data: $('#nueva-historia-form').serialize(),
          success: function (){
            location.reload();
          },
          error: function (request, message, error){
            console.log("Error performing POST on " + HISTORIA_REST_URL);
          }
        });
        return false;
      });
    })
   </script>
 </body>
</html>
{% endblock %}
